<!-- OCR Text Extraction -->
<div id="tool-ocr" class="tool-interface hidden">
  <div class="flex items-center justify-between mb-6">
    <h3 class="flex gap-2 text-xl font-semibold text-gray-900 dark:text-white">
      <svg class="h-7 w-7 fill-indigo-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path d="M72 96C49.9 96 32 113.9 32 136L32 192C32 209.7 46.3 224 64 224C81.7 224 96 209.7 96 192L96 160L160 160L160 480L128 480C110.3 480 96 494.3 96 512C96 529.7 110.3 544 128 544L256 544C273.7 544 288 529.7 288 512C288 494.3 273.7 480 256 480L224 480L224 160L288 160L288 192C288 209.7 302.3 224 320 224C337.7 224 352 209.7 352 192L352 136C352 113.9 334.1 96 312 96L72 96zM470.6 425.4C458.1 412.9 437.8 412.9 425.3 425.4C412.8 437.9 412.8 458.2 425.3 470.7L489.3 534.7C501.8 547.2 522.1 547.2 534.6 534.7L598.6 470.7C611.1 458.2 611.1 437.9 598.6 425.4C586.1 412.9 565.8 412.9 553.3 425.4L543.9 434.8L543.9 205.3L553.3 214.7C565.8 227.2 586.1 227.2 598.6 214.7C611.1 202.2 611.1 181.9 598.6 169.4L534.6 105.4C528.6 99.4 520.5 96 512 96C503.5 96 495.4 99.4 489.4 105.4L425.4 169.4C412.9 181.9 412.9 202.2 425.4 214.7C437.9 227.2 458.2 227.2 470.7 214.7L480.1 205.3L480.1 434.8L470.7 425.4z"/></svg>OCR Text Extraction
    </h3>
    <span
      class="bg-indigo-100 dark:bg-indigo-900 text-indigo-800 dark:text-indigo-200 text-xs px-2 py-1 rounded"
      >Multi-language</span
    >
  </div>

  <form id="ocr-form" class="space-y-6">
    {% csrf_token %}

    <!-- File Upload -->
    <div>
      <label
        class="flex gap-2 text-sm font-medium text-gray-700 dark:text-gray-300 mb-3"
      >
        <svg class="h-5 w-5 fill-gray-700" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path d="M128 128C128 92.7 156.7 64 192 64L341.5 64C358.5 64 374.8 70.7 386.8 82.7L493.3 189.3C505.3 201.3 512 217.6 512 234.6L512 512C512 547.3 483.3 576 448 576L192 576C156.7 576 128 547.3 128 512L128 128zM336 122.5L336 216C336 229.3 346.7 240 360 240L453.5 240L336 122.5zM256 320C256 302.3 241.7 288 224 288C206.3 288 192 302.3 192 320C192 337.7 206.3 352 224 352C241.7 352 256 337.7 256 320zM220.6 512L419.4 512C435.2 512 448 499.2 448 483.4C448 476.1 445.2 469 440.1 463.7L343.3 361.9C337.3 355.6 328.9 352 320.1 352L319.8 352C311 352 302.7 355.6 296.6 361.9L199.9 463.7C194.8 469 192 476.1 192 483.4C192 499.2 204.8 512 220.6 512z"/></svg>Upload Images or Documents
      </label>
      <div
        id="ocr-drop-zone"
        class="file-drop-zone rounded-lg p-6 text-center cursor-pointer border-2 border-dashed"
      >
        <div class="drop-placeholder">
          <span class="flex justify-center">
            <svg class="h-12 w-12 fill-gray-400 dark:fill-gray-200 mb-3" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path d="M176 544C96.5 544 32 479.5 32 400C32 336.6 73 282.8 129.9 263.5C128.6 255.8 128 248 128 240C128 160.5 192.5 96 272 96C327.4 96 375.5 127.3 399.6 173.1C413.8 164.8 430.4 160 448 160C501 160 544 203 544 256C544 271.7 540.2 286.6 533.5 299.7C577.5 320 608 364.4 608 416C608 486.7 550.7 544 480 544L176 544zM337 255C327.6 245.6 312.4 245.6 303.1 255L231.1 327C221.7 336.4 221.7 351.6 231.1 360.9C240.5 370.2 255.7 370.3 265 360.9L296 329.9L296 432C296 445.3 306.7 456 320 456C333.3 456 344 445.3 344 432L344 329.9L375 360.9C384.4 370.3 399.6 370.3 408.9 360.9C418.2 351.5 418.3 336.3 408.9 327L336.9 255z"/></svg>
          </span>          <p class="text-lg font-medium text-gray-600 dark:text-gray-400">
            Drop images or documents here
          </p>
          <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">
            Supports PNG, JPG, PDF, DOCX
          </p>
        </div>
        <div class="file-list mt-4 space-y-2"></div>
      </div>
      <input
        type="file"
        id="ocr-file-input"
        name="files"
        multiple
        accept=".png,.jpg,.jpeg,.pdf,.docx,.doc"
        class="hidden"
      />
    </div>

    <!-- OCR Settings -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      <div>
        <label
          class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"
        >
          Language
        </label>
        <select
          name="language"
          class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"
        >
          <option value="eng">English</option>
          <option value="spa">Spanish</option>
          <option value="fra">French</option>
          <option value="deu">German</option>
          <option value="chi_sim">Chinese (Simplified)</option>
          <option value="jpn">Japanese</option>
          <option value="kor">Korean</option>
          <option value="ara">Arabic</option>
          <option value="rus">Russian</option>
          <option value="multi">Multiple Languages</option>
        </select>
      </div>

      <div>
        <label
          class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"
        >
          Output Format
        </label>
        <select
          name="output_format"
          class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"
        >
          <option value="txt">Plain Text (.txt)</option>
          <option value="docx">Word Document (.docx)</option>
          <option value="pdf">PDF Document (.pdf)</option>
          <option value="html">HTML File (.html)</option>
          <option value="json">JSON Data (.json)</option>
        </select>
      </div>
    </div>

    <!-- OCR Engine Options -->
    <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-4">
      <label
        class="flex items-center justify-between cursor-pointer"
        onclick="toggleAdvanced('ocr-engine')"
      >
        <span class="text-sm font-medium text-gray-700 dark:text-gray-300"
          >OCR Engine Settings</span
        >
        <svg
          class="h-5 w-5 fill-gray-400"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 640 640"
        >
          <path
            d="M297.4 470.6C309.9 483.1 330.2 483.1 342.7 470.6L534.7 278.6C547.2 266.1 547.2 245.8 534.7 233.3C522.2 220.8 501.9 220.8 489.4 233.3L320 402.7L150.6 233.4C138.1 220.9 117.8 220.9 105.3 233.4C92.8 245.9 92.8 266.2 105.3 278.7L297.3 470.7z"
          />
        </svg>
      </label>
      <div
        id="ocr-engine"
        class="mt-3 hidden grid grid-cols-1 md:grid-cols-2 gap-4"
      >
        <div>
          <label class="block text-xs text-gray-600 dark:text-gray-400 mb-1"
            >OCR Engine</label
          >
          <select
            name="ocr_engine"
            class="w-full p-2 text-sm border border-gray-300 dark:border-gray-600 rounded"
          >
            <option value="tesseract">Tesseract (Default)</option>
            <option value="easyocr">EasyOCR</option>
            <option value="paddleocr">PaddleOCR</option>
          </select>
        </div>
        <div>
          <label class="block text-xs text-gray-600 dark:text-gray-400 mb-1"
            >Page Segmentation</label
          >
          <select
            name="page_segmentation"
            class="w-full p-2 text-sm border border-gray-300 dark:border-gray-600 rounded"
          >
            <option value="auto">Auto</option>
            <option value="single_block">Single Text Block</option>
            <option value="single_line">Single Line</option>
            <option value="single_word">Single Word</option>
            <option value="circle_word">Circle Word</option>
            <option value="single_char">Single Character</option>
          </select>
        </div>
      </div>
    </div>

    <!-- Text Processing Options -->
    <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-4">
      <label
        class="flex items-center justify-between cursor-pointer"
        onclick="toggleAdvanced('text-processing')"
      >
        <span class="text-sm font-medium text-gray-700 dark:text-gray-300"
          >Text Processing</span
        >
        <svg
          class="h-5 w-5 fill-gray-400"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 640 640"
        >
          <path
            d="M297.4 470.6C309.9 483.1 330.2 483.1 342.7 470.6L534.7 278.6C547.2 266.1 547.2 245.8 534.7 233.3C522.2 220.8 501.9 220.8 489.4 233.3L320 402.7L150.6 233.4C138.1 220.9 117.8 220.9 105.3 233.4C92.8 245.9 92.8 266.2 105.3 278.7L297.3 470.7z"
          />
        </svg>
      </label>
      <div id="text-processing" class="mt-3 hidden space-y-3">
        <div class="grid grid-cols-2 gap-4">
          <div>
            <label class="block text-xs text-gray-600 dark:text-gray-400 mb-1"
              >Text Separator</label
            >
            <select
              name="separator"
              class="w-full p-2 text-sm border border-gray-300 dark:border-gray-600 rounded"
            >
              <option value="\n">New Line</option>
              <option value=" ">Space</option>
              <option value="\t">Tab</option>
              <option value="">None</option>
              <option value="custom">Custom</option>
            </select>
          </div>
          <div id="custom-separator" class="hidden">
            <label class="block text-xs text-gray-600 dark:text-gray-400 mb-1"
              >Custom Separator</label
            >
            <input
              type="text"
              name="custom_separator"
              class="w-full p-2 text-sm border border-gray-300 dark:border-gray-600 rounded"
            />
          </div>
        </div>
        <div class="space-y-2">
          <label class="flex items-center">
            <input
              type="checkbox"
              name="preserve_layout"
              class="rounded border-gray-300 text-indigo-600"
            />
            <span class="ml-2 text-sm text-gray-700 dark:text-gray-300"
              >Preserve original layout</span
            >
          </label>
          <label class="flex items-center">
            <input
              type="checkbox"
              name="remove_hyphens"
              class="rounded border-gray-300 text-indigo-600"
            />
            <span class="ml-2 text-sm text-gray-700 dark:text-gray-300"
              >Remove hyphens at line breaks</span
            >
          </label>
          <label class="flex items-center">
            <input
              type="checkbox"
              name="detect_tables"
              class="rounded border-gray-300 text-indigo-600"
            />
            <span class="ml-2 text-sm text-gray-700 dark:text-gray-300"
              >Detect and format tables</span
            >
          </label>
        </div>
      </div>
    </div>

    <div class="flex space-x-4">
      <button
        type="submit"
        class="flex-1 bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-3 px-6 rounded-lg transition-colors"
      >
        <span class="flex justify-center items-center gap-2">
          <svg class="h-6 w-6 fill-white" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path d="M310.6 194.3L243.4 222.5L243.4 107.2L188.7 297.5L243.4 273.3L243.4 403.6L310.6 194.3zM227.4 97.6L226.1 102.3L210.9 155.2C170.6 170.7 142 209.8 142 255.5C142 307.8 176.3 351.4 225.4 361L225.4 414.6C147.5 404.1 90 336.4 90 255.6C90 175.1 149.8 108.4 227.4 97.6zM538.8 544.8C527.6 556 515.7 557.1 510.2 555.3C504.8 553.5 483.1 535.4 449.8 510.9C416.5 486.3 416.2 475.2 406.8 454.2C397.4 433.3 376.4 411.6 349.3 401.8L339.6 387.1C314.9 404 286.6 414 258.3 415.8L260.4 409.2L276.3 359.7C322.8 347.8 357.2 305.7 357.2 255.5C357.2 201 318.8 153.4 261.2 148.4L261.2 96.3C344.4 101.4 410 170.8 410 255.6C410 289.2 398.8 320.3 381 346L395.6 355.6C405.4 382.7 427.1 403.6 448 413C468.9 422.4 480.2 422.7 504.8 456C529.4 489.2 547.5 510.9 549.3 516.3C551.1 521.7 550 533.6 538.8 544.8zM528.9 526.9C528.9 522.5 525.3 518.9 520.9 518.9C516.5 518.9 512.9 522.5 512.9 526.9C512.9 531.3 516.5 534.9 520.9 534.9C525.3 534.9 528.9 531.3 528.9 526.9z"/></svg>Extract Text
        </span>
      </button>
      <button
        type="button"
        onclick="previewOCR()"
        class="px-6 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"
      >
                  <!--Eye-->
        <span class="flex justify-center items-center gap-2">
          <svg clas="h-5 w-5 fill-gray-500 dark:fill-gray-200" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path d="M320 96C239.2 96 174.5 132.8 127.4 176.6C80.6 220.1 49.3 272 34.4 307.7C31.1 315.6 31.1 324.4 34.4 332.3C49.3 368 80.6 420 127.4 463.4C174.5 507.1 239.2 544 320 544C400.8 544 465.5 507.2 512.6 463.4C559.4 419.9 590.7 368 605.6 332.3C608.9 324.4 608.9 315.6 605.6 307.7C590.7 272 559.4 220 512.6 176.6C465.5 132.9 400.8 96 320 96zM176 320C176 240.5 240.5 176 320 176C399.5 176 464 240.5 464 320C464 399.5 399.5 464 320 464C240.5 464 176 399.5 176 320zM320 256C320 291.3 291.3 320 256 320C244.5 320 233.7 317 224.3 311.6C223.3 322.5 224.2 333.7 227.2 344.8C240.9 396 293.6 426.4 344.8 412.7C396 399 426.4 346.3 412.7 295.1C400.5 249.4 357.2 220.3 311.6 224.3C316.9 233.6 320 244.4 320 256z"/></svg>Preview
        </span>
      </button>
    </div>
  </form>

  <!-- OCR Results -->
  <div id="ocr-results" class="mt-6 hidden">
    <h4 class="text-lg font-semibold mb-4 text-gray-900 dark:text-white">
      Extracted Text
    </h4>
    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md">
      <div class="border-b border-gray-200 dark:border-gray-700 p-4">
        <div class="flex justify-between items-center">
          <span class="text-sm text-gray-600 dark:text-gray-400"
            >Extracted from <span id="ocr-filename">file</span></span
          >
          <div class="flex space-x-2">
            <button
              onclick="copyOCRText()"
              class="flex gap-1 text-sm text-blue-600 hover:text-blue-800"
            >
              <svg class="h-5 w-5 fill-blue-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path d="M288 64C252.7 64 224 92.7 224 128L224 384C224 419.3 252.7 448 288 448L480 448C515.3 448 544 419.3 544 384L544 183.4C544 166 536.9 149.3 524.3 137.2L466.6 81.8C454.7 70.4 438.8 64 422.3 64L288 64zM160 192C124.7 192 96 220.7 96 256L96 512C96 547.3 124.7 576 160 576L352 576C387.3 576 416 547.3 416 512L416 496L352 496L352 512L160 512L160 256L176 256L176 192L160 192z"/></svg>Copy
            </button>
            <button
              onclick="downloadOCRText()"
              class="flex gap-1 text-sm text-green-600 hover:text-green-800"
            >
              <svg class="h-5 w-5 fill-blue-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path d="M352 96C352 78.3 337.7 64 320 64C302.3 64 288 78.3 288 96L288 306.7L246.6 265.3C234.1 252.8 213.8 252.8 201.3 265.3C188.8 277.8 188.8 298.1 201.3 310.6L297.3 406.6C309.8 419.1 330.1 419.1 342.6 406.6L438.6 310.6C451.1 298.1 451.1 277.8 438.6 265.3C426.1 252.8 405.8 252.8 393.3 265.3L352 306.7L352 96zM160 384C124.7 384 96 412.7 96 448L96 480C96 515.3 124.7 544 160 544L480 544C515.3 544 544 515.3 544 480L544 448C544 412.7 515.3 384 480 384L433.1 384L376.5 440.6C345.3 471.8 294.6 471.8 263.4 440.6L206.9 384L160 384zM464 440C477.3 440 488 450.7 488 464C488 477.3 477.3 488 464 488C450.7 488 440 477.3 440 464C440 450.7 450.7 440 464 440z"/></svg>Download
            </button>
          </div>
        </div>
      </div>
      <div class="p-4 max-h-96 overflow-y-auto">
        <pre
          id="ocr-text-output"
          class="whitespace-pre-wrap text-sm text-gray-800 dark:text-gray-200"
        ></pre>
      </div>
    </div>

    <!-- OCR Confidence -->
    <div class="mt-4 grid grid-cols-1 md:grid-cols-3 gap-4">
      <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-4 text-center">
        <div
          class="text-2xl font-bold text-indigo-600 dark:text-indigo-400"
          id="confidence-score"
        >
          0%
        </div>
        <div class="text-sm text-gray-600 dark:text-gray-400">
          Confidence Score
        </div>
      </div>
      <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-4 text-center">
        <div
          class="text-2xl font-bold text-green-600 dark:text-green-400"
          id="word-count"
        >
          0
        </div>
        <div class="text-sm text-gray-600 dark:text-gray-400">
          Words Extracted
        </div>
      </div>
      <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-4 text-center">
        <div
          class="text-2xl font-bold text-blue-600 dark:text-blue-400"
          id="processing-time"
        >
          0s
        </div>
        <div class="text-sm text-gray-600 dark:text-gray-400">
          Processing Time
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Bulk OCR Processing -->
<div id="tool-bulk_ocr" class="tool-interface hidden">
  <div class="flex items-center justify-between mb-6">
    <h3 class="flex gap-2 items-center text-xl font-semibold text-gray-900 dark:text-white">
      <svg class="h-6 w-6 fill-purple-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path d="M288 64C252.7 64 224 92.7 224 128L224 384C224 419.3 252.7 448 288 448L480 448C515.3 448 544 419.3 544 384L544 183.4C544 166 536.9 149.3 524.3 137.2L466.6 81.8C454.7 70.4 438.8 64 422.3 64L288 64zM160 192C124.7 192 96 220.7 96 256L96 512C96 547.3 124.7 576 160 576L352 576C387.3 576 416 547.3 416 512L416 496L352 496L352 512L160 512L160 256L176 256L176 192L160 192z"/></svg>Bulk OCR Processing
    </h3>
    <span
      class="bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 text-xs px-2 py-1 rounded"
      >Batch Processing</span
    >
  </div>

  <form id="bulk-ocr-form" class="space-y-6">
    {% csrf_token %}

    <!-- Multiple Files Upload -->
    <div>
      <label
        class="flex gap-2 text-sm font-medium text-gray-700 dark:text-gray-300 mb-3"
      >
        <svg
          class="h-5 w-5 fill-gray-700 dark:fill-gray-300"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 640 640"
        >
          <path
            d="M128 160C128 124.7 156.7 96 192 96L512 96C547.3 96 576 124.7 576 160L576 416C576 451.3 547.3 480 512 480L192 480C156.7 480 128 451.3 128 416L128 160zM56 192C69.3 192 80 202.7 80 216L80 512C80 520.8 87.2 528 96 528L456 528C469.3 528 480 538.7 480 552C480 565.3 469.3 576 456 576L96 576C60.7 576 32 547.3 32 512L32 216C32 202.7 42.7 192 56 192zM224 224C241.7 224 256 209.7 256 192C256 174.3 241.7 160 224 160C206.3 160 192 174.3 192 192C192 209.7 206.3 224 224 224zM420.5 235.5C416.1 228.4 408.4 224 400 224C391.6 224 383.9 228.4 379.5 235.5L323.2 327.6L298.7 297C294.1 291.3 287.3 288 280 288C272.7 288 265.8 291.3 261.3 297L197.3 377C191.5 384.2 190.4 394.1 194.4 402.4C198.4 410.7 206.8 416 216 416L488 416C496.7 416 504.7 411.3 508.9 403.7C513.1 396.1 513 386.9 508.4 379.4L420.4 235.4z"
          /></svg> Upload Multiple Files
      </label>
      <div
        id="bulk-ocr-drop-zone"
        class="file-drop-zone rounded-lg p-6 text-center cursor-pointer border-2 border-dashed"
      >
        <div class="drop-placeholder">
          <span class="flex justify-center">
            <svg
              class="h-12 w-12 fill-gray-400 dark:fill-gray-200 mb-3"
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 640 640"
            >
              <path
                d="M176 544C96.5 544 32 479.5 32 400C32 336.6 73 282.8 129.9 263.5C128.6 255.8 128 248 128 240C128 160.5 192.5 96 272 96C327.4 96 375.5 127.3 399.6 173.1C413.8 164.8 430.4 160 448 160C501 160 544 203 544 256C544 271.7 540.2 286.6 533.5 299.7C577.5 320 608 364.4 608 416C608 486.7 550.7 544 480 544L176 544zM337 255C327.6 245.6 312.4 245.6 303.1 255L231.1 327C221.7 336.4 221.7 351.6 231.1 360.9C240.5 370.2 255.7 370.3 265 360.9L296 329.9L296 432C296 445.3 306.7 456 320 456C333.3 456 344 445.3 344 432L344 329.9L375 360.9C384.4 370.3 399.6 370.3 408.9 360.9C418.2 351.5 418.3 336.3 408.9 327L336.9 255z"
              />
            </svg>
          </span>
          <p class="text-lg font-medium text-gray-600 dark:text-gray-400">
            Drop multiple files or folders here
          </p>
          <p class="text-sm text-gray-500 dark:text-gray-400 mt-1">
            Supports images, PDFs, and documents
          </p>
        </div>
        <div class="file-list mt-4 space-y-2"></div>
      </div>
      <input
        type="file"
        id="bulk-ocr-file-input"
        name="files"
        multiple
        webkitdirectory
        accept=".png,.jpg,.jpeg,.pdf,.docx,.doc"
        class="hidden"
      />
    </div>

    <!-- Bulk Processing Settings -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
      <div>
        <label
          class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"
        >
          Language
        </label>
        <select
          name="language"
          class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"
        >
          <option value="eng">English</option>
          <option value="multi">Multiple Languages</option>
        </select>
      </div>

      <div>
        <label
          class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"
        >
          Output Format
        </label>
        <select
          name="output_format"
          class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"
        >
          <option value="txt">Text Files</option>
          <option value="docx">Word Documents</option>
          <option value="pdf">PDF Documents</option>
          <option value="combined">Combined File</option>
        </select>
      </div>

      <div>
        <label
          class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2"
        >
          Processing Mode
        </label>
        <select
          name="processing_mode"
          class="w-full p-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"
        >
          <option value="parallel">Parallel (Fast)</option>
          <option value="sequential">Sequential (Stable)</option>
        </select>
      </div>
    </div>

    <!-- File Organization -->
    <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-4">
      <label
        class="flex items-center justify-between cursor-pointer"
        onclick="toggleAdvanced('bulk-organization')"
      >
        <span class="text-sm font-medium text-gray-700 dark:text-gray-300"
          >File Organization</span
        >
        <svg
          class="h-5 w-5 fill-gray-400"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 640 640"
        >
          <path
            d="M297.4 470.6C309.9 483.1 330.2 483.1 342.7 470.6L534.7 278.6C547.2 266.1 547.2 245.8 534.7 233.3C522.2 220.8 501.9 220.8 489.4 233.3L320 402.7L150.6 233.4C138.1 220.9 117.8 220.9 105.3 233.4C92.8 245.9 92.8 266.2 105.3 278.7L297.3 470.7z"
          />
        </svg>
      </label>
      <div id="bulk-organization" class="mt-3 hidden space-y-3">
        <div class="grid grid-cols-2 gap-4">
          <div>
            <label class="block text-xs text-gray-600 dark:text-gray-400 mb-1"
              >Output Folder</label
            >
            <input
              type="text"
              name="output_folder"
              placeholder="./ocr_results/"
              class="w-full p-2 text-sm border border-gray-300 dark:border-gray-600 rounded"
            />
          </div>
          <div>
            <label class="block text-xs text-gray-600 dark:text-gray-400 mb-1"
              >File Naming</label
            >
            <select
              name="file_naming"
              class="w-full p-2 text-sm border border-gray-300 dark:border-gray-600 rounded"
            >
              <option value="original">Original Names</option>
              <option value="sequential">Sequential Numbers</option>
              <option value="timestamp">Timestamp</option>
            </select>
          </div>
        </div>
        <label class="flex items-center">
          <input
            type="checkbox"
            name="preserve_structure"
            class="rounded border-gray-300 text-purple-600"
            checked
          />
          <span class="ml-2 text-sm text-gray-700 dark:text-gray-300"
            >Preserve folder structure</span
          >
        </label>
      </div>
    </div>

    <div class="flex space-x-4">
      <button
        type="submit"
        class="flex-1 bg-purple-600 hover:bg-purple-700 text-white font-medium py-3 px-6 rounded-lg transition-colors"
      >
      <span class="flex justify-center items-center gap-2">
        <svg class="h-5 w-5 fill-white" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path d="M64 320C64 178.6 178.6 64 320 64C461.4 64 576 178.6 576 320C576 461.4 461.4 576 320 576C178.6 576 64 461.4 64 320zM252.3 211.1C244.7 215.3 240 223.4 240 232L240 408C240 416.7 244.7 424.7 252.3 428.9C259.9 433.1 269.1 433 276.6 428.4L420.6 340.4C427.7 336 432.1 328.3 432.1 319.9C432.1 311.5 427.7 303.8 420.6 299.4L276.6 211.4C269.2 206.9 259.9 206.7 252.3 210.9z"/></svg>Start Bulk OCR
       </span>
      </button>
      <button
        type="button"
        onclick="scanBulkFiles()"
        class="flex justify-center items-center gap-2 px-6 py-3 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"
      >
       <svg class="h-6 w-6 fill-gray-700" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640"><path d="M310.6 194.3L243.4 222.5L243.4 107.2L188.7 297.5L243.4 273.3L243.4 403.6L310.6 194.3zM227.4 97.6L226.1 102.3L210.9 155.2C170.6 170.7 142 209.8 142 255.5C142 307.8 176.3 351.4 225.4 361L225.4 414.6C147.5 404.1 90 336.4 90 255.6C90 175.1 149.8 108.4 227.4 97.6zM538.8 544.8C527.6 556 515.7 557.1 510.2 555.3C504.8 553.5 483.1 535.4 449.8 510.9C416.5 486.3 416.2 475.2 406.8 454.2C397.4 433.3 376.4 411.6 349.3 401.8L339.6 387.1C314.9 404 286.6 414 258.3 415.8L260.4 409.2L276.3 359.7C322.8 347.8 357.2 305.7 357.2 255.5C357.2 201 318.8 153.4 261.2 148.4L261.2 96.3C344.4 101.4 410 170.8 410 255.6C410 289.2 398.8 320.3 381 346L395.6 355.6C405.4 382.7 427.1 403.6 448 413C468.9 422.4 480.2 422.7 504.8 456C529.4 489.2 547.5 510.9 549.3 516.3C551.1 521.7 550 533.6 538.8 544.8zM528.9 526.9C528.9 522.5 525.3 518.9 520.9 518.9C516.5 518.9 512.9 522.5 512.9 526.9C512.9 531.3 516.5 534.9 520.9 534.9C525.3 534.9 528.9 531.3 528.9 526.9z"/></svg>Scan Files
      </button>
    </div>
  </form>

  <!-- Bulk Processing Progress -->
  <div id="bulk-progress" class="mt-6 hidden">
    <h4 class="text-lg font-semibold mb-4 text-gray-900 dark:text-white">
      Bulk OCR Progress
    </h4>
    <div class="space-y-4">
      <div class="flex justify-between text-sm">
        <span>Total Files: <strong id="bulk-total">0</strong></span>
        <span>Processed: <strong id="bulk-processed">0</strong></span>
        <span>Success: <strong id="bulk-success">0</strong></span>
        <span>Failed: <strong id="bulk-failed">0</strong></span>
      </div>
      <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3">
        <div
          id="bulk-progress-bar"
          class="bg-purple-600 h-3 rounded-full transition-all duration-300"
          style="width: 0%"
        ></div>
      </div>
      <div
        id="current-bulk-file"
        class="text-sm text-gray-600 dark:text-gray-400 text-center"
      ></div>

      <!-- Real-time Log -->
      <div
        class="bg-gray-50 dark:bg-gray-700 rounded-lg p-3 max-h-40 overflow-y-auto"
      >
        <div id="bulk-log" class="text-xs font-mono space-y-1">
          <!-- Log entries will appear here -->
        </div>
      </div>
    </div>
  </div>
</div>
